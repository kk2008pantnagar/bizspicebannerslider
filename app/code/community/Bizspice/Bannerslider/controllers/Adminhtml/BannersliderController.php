<?phpclass Bizspice_Bannerslider_Adminhtml_BannersliderController extends Mage_Adminhtml_Controller_Action{	protected function _initAction()    {        $this->loadLayout()            ->_setActiveMenu('bannerslider/slides')            ->_addBreadcrumb(Mage::helper('adminhtml')->__('Slides Manager'), Mage::helper('adminhtml')->__('Slides Manager'));        return $this;    }	public function indexAction() {			$this->_initAction();  		$this->_addContent($this->getLayout()->createBlock('bannerslider/adminhtml_bannerslider'));		$this->renderLayout();	}		public function editAction()    {        $bannersliderId     = $this->getRequest()->getParam('id');        $bannersliderModel  = Mage::getModel('bannerslider/bannerslider')->load($bannersliderId);         if ($bannersliderModel->getId() || $bannersliderId == 0) {             Mage::register('bannerslider_data', $bannersliderModel);             $this->_initAction();                        			$this->getLayout()->getBlock('head')			->setCanLoadExtJs(true)			->addItem('js','tiny_mce/tiny_mce.js')			->addItem('js','mage/adminhtml/variables.js')			->addItem('js','mage/adminhtml/wysiwyg/widget.js')			->addItem('js','mage/adminhtml/wysiwyg/tiny_mce/setup.js')			->addJs('mage/adminhtml/browser.js')			->addJs('prototype/window.js')			->addJs('lib/flex.js')			->addJs('lib/FABridge.js')			->addJs('mage/adminhtml/flexuploader.js')			->addItem('js_css','prototype/windows/themes/default.css')			->addItem('skin_css','lib/prototype/windows/themes/magento.css');						            $this->_addContent($this->getLayout()->createBlock('bannerslider/adminhtml_bannerslider_edit'));                                           $this->renderLayout();        } else {            Mage::getSingleton('adminhtml/session')->addError(Mage::helper('bannerslider')->__('Slide does not exist'));            $this->_redirect('*/*/');        }    }       public function newAction()    {        $this->_forward('edit');    }		public function saveAction()    {        if ( $this->getRequest()->getPost() ) 		{            try 			{                $postData = $this->getRequest()->getPost();                $bannersliderModel = Mage::getModel('bannerslider/bannerslider');                               $bannersliderModel->setId($this->getRequest()->getParam('id'))                    ->setTitle($postData['title'])                    ->setData('page_content',$postData['page_content'])                    ->setStatus($postData['status'])                    ->save();                               Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('adminhtml')->__('Slide was successfully saved'));                Mage::getSingleton('adminhtml/session')->setBannersliderData(false);                 $this->_redirect('*/*/');                return;            } 			catch (Exception $e) 			{                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());                Mage::getSingleton('adminhtml/session')->setBannersliderData($this->getRequest()->getPost());                $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));                return;            }        }        $this->_redirect('*/*/');    }		public function deleteAction()    {        if( $this->getRequest()->getParam('id') > 0 ) {            try {                $bannersliderModel = Mage::getModel('bannerslider/bannerslider');                               $bannersliderModel->setId($this->getRequest()->getParam('id'))                    ->delete();                                   Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('adminhtml')->__('Slide was successfully deleted'));                $this->_redirect('*/*/');            } catch (Exception $e) {                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());                $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));            }        }        $this->_redirect('*/*/');    }}